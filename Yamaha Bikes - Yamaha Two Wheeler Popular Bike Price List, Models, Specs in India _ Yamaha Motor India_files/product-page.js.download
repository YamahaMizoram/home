if ($("#360section").length > 0) {
    $(window).scroll(threesixtyInView);
}

$('body').on('click', '.amazon-logo-outer', function() {
    // location.href = ;
    var win = window.open($(this).attr("href"), '_blank');
    win.focus();

});
$(document).ready(function() {
    $('.hover-img').mouseover(function() {
        $('#' + this.id + '-wrapper').css('opacity', '1');
    });
    $('.hover-img').mouseout(function() {
        $('#' + this.id + '-wrapper').css('opacity', '0');
    });

});

$(document).ready(function() {


    var tobii = new Tobii();
    var isSlick = true;
    $(".fixed-icon-casio").hide();
    $(window).scroll(function() {
        if ($(window).scrollTop() > 610) {
            $(".fixed-icon-casio").show();
        } else {
            $(".fixed-icon-casio").hide();
        }
    });


    var isPopupClose = false;
    $(".fixed-icon-y-connect").hide();
    // $(window).scroll(function() {
    //     if ($(window).scrollTop() > 10791 && $(window).scrollTop() < 12600 && !isPopupClose) {
    //         $(".fixed-icon-y-connect").show();
    //         $(".fixed-icon-y-connect").css('opacity' , '1');
    //     } else {
    //         $(".fixed-icon-y-connect").hide();
    //         $(".fixed-icon-y-connect").css('opacity' , '0');
    //     }

    // });
    $(".fixed-icon-y-connect").show();
    $(".fixed-icon-y-connect").css('opacity', '1');
    $('.y-connect-close').click(function() {
        isPopupClose = true;
        $(".fixed-icon-y-connect").hide();
        $(".fixed-icon-y-connect").css('opacity', '0');
    });


    $("input[name='modelType'").on("change", function() {
        $("ul.list-color").addClass("d-none");
        $("ul.list-color." + $(this).val()).removeClass("d-none");
        $("ul.list-color." + $(this).val() + " li:eq(0)").trigger("click");

    });
    $(".acceModal-close, #acceModalBg").on("click", function() {
        $("#acceModalBg, #acceModal").hide();
        $("body").removeClass("modalOpen");
    });

    $('.fzs-fi-new').click(function() {
        var product = $(this).attr('data-product-ref');
        switch (product) {
            case 'fzsfinew':
                $('#fzfinew-href').attr("href", "https://shop.yamaha-motor-india.com/collections/motorcycle/products/fzs-fi-new");
                break;
            case 'fzsfivintage':
                $('#fzfinew-href').attr("href", "https://shop.yamaha-motor-india.com/collections/motorcycle/products/fzs-fi-vintage-new");
                break;
            default:
                $('#fzfinew-href').attr("href", "https://shop.yamaha-motor-india.com/collections/motorcycle/products/fzs-fi-new");

        }
    })

    $('.fz-25').click(function() {
            var product = $(this).attr('data-product-ref');
            switch (product) {
                case 'fz25bs6':
                    $('#fz25-book-now').attr("href", "https://shop.yamaha-motor-india.com/collections/motorcycle/products/buy-fz-25");
                    break;
                case 'fz25monster':
                    $('#fz25-book-now').attr("href", "https://shop.yamaha-motor-india.com/collections/motorcycle/products/buy-fz-25-motogp-edition");
                    break;
                default:
                    $('#fz25-book-now').attr("href", "https://shop.yamaha-motor-india.com/collections/motorcycle/products/buy-fz-25");
            }
        })
        // $('.mt-15').click(function() {
        //     var product = $(this).attr('data-product-ref');
        //     if (product == 'mt15motogp') {
        //         $('#mt15-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-motogp-editions?variant=39859344441471");
        //     } else {
        //         $('#mt15-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/mt-15-ver-2-0");
        //     }
        // });
        // $('.aerox-product').click(function() {
        //     var product = $(this).attr('data-product-ref');
        //     if (product == 'aeroxspl') {
        //         $('#aerox-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-motogp-editions?variant=43456138674418");
        //     } else {
        //         $('#aerox-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-aerox-155");
        //     }
        // });
        // $('.r15m-product').click(function() {
        //     var product = $(this).attr('data-product-ref');
        //     if (product == 'r15v4motogp') {
        //         $('#r15m-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-motogp-editions?variant=39859344343167");
        //     } else {
        //         $('#r15m-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-r15-m");
        //     }
        // });
        // $('.rayzr-product').click(function() {
        //     var product = $(this).attr('data-product-ref');
        //     if (product == 'rayzrdiscsplhybridmotogp') {
        //         $('#rayzr-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-motogp-editions?variant=39859648397439");
        //     } else {
        //         $('#rayzr-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-rayzr-125-fi-hybrid");
        //     }
        // });

    $('.motogpedition').click(function() {
        var variantId = $(this).attr('data-variant-id');
        $('.btn-buynow').attr("href", "https://shop.yamaha-motor-india.com/products/buy-motogp-editions?variant=" + variantId);
    })

    $('#acceCarousel.slider-nav').slick({
        slidesToShow: 4,
        slidesToScroll: 4,
        dots: false,
        focusOnSelect: false,
        infinite: true,
        prevArrow: '<button type="button" class="slick-prev"><svg viewBox="0 0 490.787 490.787" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-prev"></use></svg></button>',
        nextArrow: '<button type="button" class="slick-next"><svg viewBox="0 0 490.8 490.8" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-next"></use></svg></button>',
        responsive: [{
            breakpoint: 992,
            settings: {
                slidesToShow: 3,
                slidesToScroll: 3,
                dots: true
            }
        }, {
            breakpoint: 576,
            settings: {
                autoplay: true,
                arrows: false,
                nav: false,
                slidesToShow: 1,
                slidesToScroll: 1,
                dots: true,
                autoplay: true,
                arrows: false,
                nav: false,
                autoplayTimeout: 5000
            }
        }]
    });
    $('.amazon-logo-outer').on('click', function(event) {
        event.stopPropagation();
    })

    $('#acceCarousel.slider-nav').on('click', '.slick-slide', function(event) {
        event.preventDefault();
        if ($(this).hasClass("btnAcceM")) {
            $("#acceModalBg").show();
            $("#acceModal").css({
                display: "flex"
            });
            $("body").addClass("modalOpen");
            if (isSlick) {
                settingSlick();
                isSlick = false;
            }
        }
        var goToSingleSlide = $(this).data('slick-index');
        $('.slider-single').slick('slickGoTo', goToSingleSlide);
        $('#acceMCarouselPC.slider-nav').slick('slickGoTo', goToSingleSlide);
    });
    //click listener when image is clicked
    $('.mt15-body-img,.mt15-wheel-img').on('click', function(event) {
        event.preventDefault();
        $('#booking').text('');
        if ($(this).attr('id') == 'Ice_body') {
            $('#Vermillion_wheel').css("display", "none");

        } else {
            $('#Vermillion_wheel').css("display", "flex");

        }

        if ($(this).hasClass('mt15-body-img')) {
            //var wheelColor = $('#mt15-wheel-section').find('.mt15-img-selected')[0].id.split('_')[0];
            $('.mt15-body-img').removeClass('mt15-img-selected');
        } else if ($(this).hasClass('mt15-wheel-img')) {
            $('.mt15-wheel-img').removeClass('mt15-img-selected');
        }
        $(this).addClass('mt15-img-selected');
        if ($('#mt15-body-section').find('.mt15-img-selected')[0].id.split('_')[0] == 'Ice') {
            $('#Vermillion_wheel').css("display", "none");
        }
        getFinalBody();
    })

    function settingSlick() {
        $('.slider-single').slick({
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            fade: true,
            adaptiveHeight: true,
            infinite: true,
            useTransform: true,
            speed: 400,
            prevArrow: '<button type="button" class="slick-prev"><svg viewBox="0 0 490.787 490.787" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-prev"></use></svg></button>',
            nextArrow: '<button type="button" class="slick-next"><svg viewBox="0 0 490.8 490.8" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-next"></use></svg></button>',
            cssEase: 'cubic-bezier(0.77, 0, 0.18, 1)',
            responsive: [{
                breakpoint: 992,
                settings: {
                    arrows: true,
                    dots: true
                }
            }]
        });

        $('#acceMCarouselPC.slider-nav')
            .on('init', function(event, slick) {
                $('.slider-nav .slick-slide.slick-current').addClass('is-active');
            })
            .slick({
                slidesToShow: 6,
                slidesToScroll: 6,
                dots: false,
                focusOnSelect: false,
                infinite: true,
                prevArrow: '<button type="button" class="slick-prev"><svg viewBox="0 0 490.787 490.787" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-prev"></use></svg></button>',
                nextArrow: '<button type="button" class="slick-next"><svg viewBox="0 0 490.8 490.8" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-next"></use></svg></button>',
                responsive: [{
                    breakpoint: 992,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 3,
                    }
                }, {
                    breakpoint: 576,
                    settings: {
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        arrows: false
                    }
                }]
            });

        $('.slider-single').on('afterChange', function(event, slick, currentSlide) {
            $('#acceCarousel.slider-nav').slick('slickGoTo', currentSlide);
            $('#acceMCarouselPC.slider-nav').slick('slickGoTo', currentSlide);
            var currrentNavSlideElem = '.slider-nav .slick-slide[data-slick-index="' + currentSlide + '"]';
            $('.slider-nav .slick-slide.is-active').removeClass('is-active');
            $(currrentNavSlideElem).addClass('is-active');
        });

        $('#acceMCarouselPC.slider-nav').on('click', '.slick-slide', function(event) {
            event.preventDefault();
            var goToSingleSlide = $(this).data('slick-index');
            $('.slider-single').slick('slickGoTo', goToSingleSlide);
            $('#acceCarousel.slider-nav').slick('slickGoTo', goToSingleSlide);
        });
    }


    $(".list-nav__link").click(function(event) {
        var scrollTo = $(this).attr("href");

        if ($(window).width() > 767) {
            $('html,body').animate({
                scrollTop: $(this.hash).offset().top - 200
            }, 1000);
            return false;
        } else {
            $('html,body').animate({
                scrollTop: $(this.hash).offset().top - 40
            }, 1000);
            return false;
        }
        event.preventDefault();
    });



    $('#bannerCarousel').owlCarousel({
        items: 1,
        animateOut: 'fadeOut',
        nav: true,
        dots: true,
        autoplay: true,
        autoplayTimeout: 10000,
        merge: true,
        loop: true,
        margin: 0,
        video: true,
        lazyLoad: true,
        center: true,
        autoHeight: true,
        navText: ['<svg viewBox="0 0 490.787 490.787" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-prev"></use></svg>', '<svg viewBox="0 0 490.8 490.8" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-next"></use></svg>']
    });
    $('#centerCarousel').owlCarousel({
        items: 2,
        nav: true,
        dots: true,
        autoplay: false,
        loop: true,
        margin: 0,
        video: true,
        lazyLoad: true,
        center: true,
        autoHeight: true,
        navText: ['<svg viewBox="0 0 490.787 490.787" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-prev"></use></svg>', '<svg viewBox="0 0 490.8 490.8" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-next"></use></svg>'],
        responsive: {
            0: {
                items: 1,
                center: true
            },
            576: {
                items: 2
            }
        }
    });

    $('.list-nav__link').click(function() {
        $('#navScroll').removeClass('show');
    });
    //Get the final body when user selects body or wheel
    function getFinalBody() {
        //Get image name of body color 
        var bodyColor = $('#mt15-body-section').find('.mt15-img-selected')[0].id.split('_')[0];
        //Get image name of wheel color
        var wheelColor = $('#mt15-wheel-section').find('.mt15-img-selected')[0].id.split('_')[0];
        if (wheelColor == 'Vermillion' && bodyColor == 'Ice') {
            $('.mt15-body-img,.mt15-wheel-img').removeClass('mt15-img-selected');
            $('#black_body').addClass('mt15-img-selected');
            $('#Gold_wheel').addClass('mt15-img-selected');
            setFinalBodySource('black', 'Gold');
            return;
        }
        setFinalBodySource(bodyColor, wheelColor);
        setShopifyRedirect(`${bodyColor}_${wheelColor}`);
    }

    function setFinalBodySource(bodyColor, wheelColor) {
        // if(wheelColor == 'Green') {
        //     $('#booking').html('Pre-Booking Opens from <b>Feb-2021</b>');
        //$('#shopify-redirect').css('display', 'none');
        // }

        $('#shopify-redirect').css('display', 'inline-block');
        var finalImageName = `${bodyColor}_${wheelColor}_color.png`;
        var imageUrl = $('.mt15-final-img').attr('src');
        var index = imageUrl.lastIndexOf("/") + 1;
        var path = imageUrl.substr(0, index);
        var finalImageUrl = path + finalImageName;
        //set src of final body
        $('.mt15-final-img').attr('src', finalImageUrl);
        $('.mt15-final-img').attr('alt', finalImageName);
        //set display text
        var btext = $('#' + bodyColor + '_body').children('span').text();
        var wtext = $('#' + wheelColor + '_wheel').children('span').text();
        $('#dtext').text(btext + ' & ' + wtext);
    }

    function setShopifyRedirect(colorCombination) {
        var url;
        switch (colorCombination) {
            case 'blue_Indigo':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32749763362943';
                break;

            case 'blue_Gold':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32749763231871';
                break;

            case 'blue_Vermillion':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32749763100799';
                break;

            case 'blue_Green':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266318975';
                break;

            case 'black_Indigo':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266384511';
                break;

            case 'black_Gold':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266351743';
                break;

            case 'black_Green':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266417279';
                break;

            case 'black_Vermillion':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266450047';
                break;

            case 'Ice_Indigo':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266515583';
                break;

            case 'Ice_Gold':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266482815';
                break;
            case 'Ice_Green':
                url = 'https://shop.yamaha-motor-india.com/products/mt-15-custom-color?variant=32750266548351';
                break;

        }

        $('#shopify-redirect').attr('href', url);
    }
    // function myfunctionAudio(){
    //     var audio = new Audio('theme/v3/audio/fz-x.mp3');
    //     audio.play();
    // }
    const audio = new Audio('theme/v3/audio/fz-x.mp3');
    $('input#switch').click(function() {

        if ($(this).is(':checked')) {

            audio.play();
            $(".img-wave").show();
        } else {
            // $('input#switch').prop('checked',false);
            audio.pause();
            $(".img-wave").hide();
        }
    });
    $('.y-connect-close').on('click', function(ev) {
        $(".y-connect-center-outer").hide();
    });
    // $('input#switch').click(function() {
    //     if($(this).is(':checked')) {
    //         $("#video-show").show();
    //         $("#video-hide").hide();
    //     } else {
    //         $("#video-hide").show();
    //         $("#video-show").hide();
    //     }
    // });

    // $('.toggle-box .fa').on('click', function(ev) {
    //     $("#video-hide").show();
    //     $("#video-show").hide();
    //     $('video')[0].pause();
    //     $('input#switch').prop('checked',false);
    // });
    // 
});


var product360 = {

    settings: {
        path: null,
        imageCount: 0,
        height: screen.width > 480 ? 360 : screen.width - 100,
        autoplay: false,
        ext: ".webp"
    },
    setExtension: function(extension) {
        product360.settings.ext = "." + extension;
    },
    init: function(autoplay) {
        product360.settings.imgcount = $('#360count').val();
        product360.settings.path = $("#product-image-path").html() + "/360/";
        product360.settings.autoplay = autoplay;
        $(".loading-action-btn").click(function() {
            $(".preview-img").hide();
            $(".preview-img-overlay").hide();
            $(".spinner").removeClass('d-none');
            product360.start();
            $(".play-previous").removeClass('d-none');
            $(".play-next").removeClass('d-none');
            $(".play-action-btn").removeClass('d-none');
            if (product360.settings.autoplay) {
                component.play();
                $('.stop-action-btn').removeClass('d-none');
                $('.play-action-btn').addClass('d-none');
            }
        });
    },
    initLoad: function() {
        product360.settings.imgcount = $('#360count').val();
        product360.settings.path = $("#product-image-path").html() + "/360/";
        $(".preview-img").hide();
        $(".preview-img-overlay").hide();
        $(".spinner").removeClass('d-none');
        product360.start();
        $(".play-previous").removeClass('d-none');
        $(".play-next").removeClass('d-none');
    },
    setHeight: function(height) {
        setTimeout(function() {
            product360.settings.height = $('#threesixty .play-360').height();
        }, 1000);
    },
    start: function() {
        component = jQuery('.product1').ThreeSixty({
            totalFrames: product360.settings.imgcount,
            endFrame: product360.settings.imgcount,
            currentFrame: 1,
            imgList: '.threesixty_images',
            progress: '.spinner',
            imagePath: product360.settings.path,
            filePrefix: '',
            ext: product360.settings.ext,
            height: product360.settings.height,
            width: 600,
            navigation: false,
            disableSpin: false,
            responsive: true,
            rotate: -360,

        });
        $('.play-previous').bind('click', function(e) {
            component.previous();
        });
        $('.play-next').bind('click', function(e) {
            component.next();
        });
        $('.play-action-btn').bind('click', function(e) {
            component.play();
            $('.stop-action-btn').removeClass('d-none');
            $('.play-action-btn').addClass('d-none');
        });
        $('.stop-action-btn').bind('click', function(e) {
            component.stop();
            $('.stop-action-btn').addClass('d-none');
            $('.play-action-btn').removeClass('d-none');
        });
    }
}

var colorPreview = {
    settings: {
        product_id: '',
        state_profile_id: '',
        state_name: '',
        caching: {}
    },
    modelsettings: {
        disk: '',
        drum: '',
        selectedColor: ''
    },
    init: function(isCBU) {
        labelvalue = $('#color-selection-panel li').attr('data-color-ref');
        vahanvalue = $('#color-selection-panel li').attr('data-vahan');
        $("#color-label .color-name").html(labelvalue);
        $("#color-label .vahan-name").html(vahanvalue);
        $('#color-selection-panel li').click(function(e) {
            if ($('.model-selection:checked').val() != undefined) {
                var modelType = $('.model-selection:checked').val();
                if (modelType.indexOf('disk') != -1) {
                    modelType = "(Disk)";
                } else {
                    modelType = "(Drum)";
                }
            } else {
                modelType = "";
            }

            /*ga('send', {
                hitType: 'event',
                eventCategory: 'colorPreview',
                eventAction: window.location.pathname,
                eventLabel: $(this).attr("data-color-ref") + modelType
            });*/

            $('#color-selection-panel li').each(function() {
                $(this).removeClass('selected');
                $(this).find("a").removeClass('is-active');
            });
            var selectedImage = $(this);
            var new_image_src = $(this).attr("data-preview-src")
            var image = $(".color-preview img");
            image.fadeOut('fast', function() {
                image.attr('src', new_image_src);
                image.attr('alt', selectedImage.attr('data-alt-name'));
                image.fadeIn('fast');
            });

            $(this).addClass('selected');
            $(this).find("a").addClass('is-active');

            colorPreview.settings.product_id = $(this).attr('data-product-ref');
            // if(colorPreview.settings.product_id == 'aeroxspl'){
            //     $('.btn-buynow').hide();
            // } else {
            //     $('.btn-buynow').show();
            // }
            labelvalue = $(this).attr('data-color-ref');
            vahanvalue = $(this).attr('data-vahan');
            $("#color-label .color-name").html(labelvalue);
            $("#color-label .vahan-name").html(vahanvalue);

            colorPreview.getPrice();
            colorPreview.setShopifyLink();
            return false;
        });
        var selectedColor = $('#color-selection-panel li.selected');

        colorPreview.settings.product_id = selectedColor.attr('data-product-ref');
        colorPreview.settings.state_profile_id = this.getUserPreferredState(isCBU);
        colorPreview.settings.state_name = this.getUserPreferredStateName(isCBU);
        colorPreview.getPrice();
        $("#state-list").on("change", function() {
            $(this).prop("disabled", true);
            colorPreview.settings.state_profile_id = $(this).val();

            /* ga('send', {
                       hitType: 'event',
                       eventCategory: 'stateWisePrice',
                       eventAction: window.location.pathname,
                       eventLabel: $(this).val()
                     });*/

            colorPreview.settings.state_name = $('#state-list option:selected').text();
            colorPreview.setUserState(colorPreview.settings.state_profile_id, colorPreview.settings.state_name);
            colorPreview.getPrice();
        });
    },
    getUserPreferredState: function(isCBU) {
        if (isCBU)

            return "delhi";
        localStorage.setItem("userPreferredState", "delhi");
        localStorage.setItem("userPreferredStateName", "Delhi");
        $('#state-list').val(localStorage.getItem("userPreferredState"));
        return localStorage.getItem("userPreferredState");
    },
    getUserPreferredStateName: function(isCBU) {
        if (isCBU)
            return "Delhi";
        return localStorage.getItem("userPreferredStateName");
    },
    setUserState: function(state, stateName) {
        localStorage.setItem("userPreferredState", state);
        localStorage.setItem("userPreferredStateName", stateName);
    },
    getPrice: function() {
        //for mt15 custom color
        if (colorPreview.settings.product_id == undefined || colorPreview.settings.product_id == 'undefined') {
            colorPreview.settings.product_id = 'mt15customcolor';
        }
        var priceKey = colorPreview.settings.state_profile_id + "_" + colorPreview.settings.product_id;
        var oldpriceKey = colorPreview.settings.state_profile_id + "_" + colorPreview.settings.product_id + "_bs4price";
        if (priceKey in colorPreview.settings.caching) {
            if (colorPreview.settings.caching[priceKey] == "COMING SOON") {
                $('#product-price').addClass("font-18").removeClass("font-48");
            } else {
                $('#product-price').removeClass("font-18").addClass("font-48");;
            }
            $('#product-price').html(colorPreview.settings.caching[priceKey] + '*');
            if ($("#page_id").html() == 'fzsfi' || $("#page_id").html() == 'r15' || $("#page_id").html() == 'mt15') {
                if ($('#old-product-price') && $('#color-selection-panel li.selected').attr('data-old-color') == "available") {
                    $('#old-product-price').html(colorPreview.settings.caching[oldpriceKey] + '*');
                    $(".old-price-block").show();
                } else {
                    $(".old-price-block").hide();
                }
            }
            $('#price-selected-state').html(colorPreview.settings.state_name);
            $("#state-list").prop("disabled", false);
        } else {
            $('#product-price-display').addClass("d-none");
            $('#price-loader').removeClass("d-none");
            const now = new Date();
            var url = "statewiseprice-getpricebymodel-" + colorPreview.settings.product_id + "-" + colorPreview.settings.state_profile_id + ".html?AJAX=1&t=" + now.getTime();
            $.ajax({
                method: "GET",
                url: url
            }).done(function(responseData) {
                var resData = JSON.parse(responseData);
                var price = numberWithCommasOrSpace(resData.price, " ");
                var bs4price = numberWithCommasOrSpace(resData.bs4price, " ");
                if (price == "COMING SOON") {
                    $('#product-price').addClass("font-18").removeClass("font-48");
                } else {
                    $('#product-price').removeClass("font-18").addClass("font-48");;
                }
                $('#product-price').html(price + '*');
                var selectedColor = $('#color-selection-panel li.selected');
                if ($("#page_id").html() == 'fzsfi' || $("#page_id").html() == 'r15' || $("#page_id").html() == 'mt15') {
                    if ($('#old-product-price') && resData.bs4price != 0 && selectedColor.attr('data-old-color') == "available") {
                        $(".old-price-block").show();
                        $('#old-product-price').html(bs4price + '*');

                    } else {
                        $(".old-price-block").hide();
                    }
                }
                $('#price-selected-state').html(colorPreview.settings.state_name);
                $('#price-loader').addClass("d-none");
                $('#product-price-display').removeClass("d-none");
                colorPreview.settings.caching[colorPreview.settings.state_profile_id + "_" + colorPreview.settings.product_id] = price;
                colorPreview.settings.caching[colorPreview.settings.state_profile_id + "_" + colorPreview.settings.product_id + "_bs4price"] = bs4price;
                $("#state-list").prop("disabled", false);
            });
        }
    },
    initModelSelection: function() {
        var selectedModel = $('.model-selection:checked').val();
        var color = $('ul.' + selectedModel + ' li.selected').attr("data-color");

        console.log('color', color)
        colorPreview.modelsettings.disk = color;
        colorPreview.showModelColor(selectedModel);
        $('.model-selection:radio').on('change', function() {
            selectedModel = $('.model-selection:checked').val();
            color = $('ul.' + selectedModel + ' li.selected').attr("data-color");
            colorPreview.showModelColor($('.model-selection:checked').val());
        });
    },
    showModelColor: function(selectedModel) {

        console.log('selectedModel', selectedModel)
        var selectedColor = '';
        var arr = selectedModel.split('-')


        var type = arr[arr.length - 1];
        var color = $('ul.' + selectedModel + ' li.selected').attr("data-color");
        $('ul.' + selectedModel).removeClass('d-none');
        $('ul.' + selectedModel).attr('id', 'color-selection-panel');
        $('img.' + selectedModel).removeClass('d-none');
        $('ul.' + selectedModel).siblings('ul').addClass('d-none');
        $('ul.' + selectedModel).siblings('ul').attr('id', '');
        $('img.' + selectedModel).siblings('img').addClass('d-none');
        labelvalue = $('#color-selection-panel li.selected').attr('data-color-ref');
        vahanvalue = $('#color-selection-panel li.selected').attr('data-vahan');
        $("#color-label .color-name").html(labelvalue);
        $("#color-label .vahan-name").html(vahanvalue);
        if (type == 'disk') {

            colorPreview.modelsettings.disk = color;
            colorPreview.modelsettings.selectedColor = colorPreview.modelsettings.disk;
        } else {
            colorPreview.modelsettings.drum = color;
            colorPreview.modelsettings.selectedColor = colorPreview.modelsettings.drum;
        }
        colorPreview.defaultImagePreview(selectedModel, colorPreview.modelsettings.selectedColor);
        colorPreview.settings.product_id = $('ul.' + selectedModel + ' li.selected').attr('data-product-ref');
        colorPreview.getPrice();
    },
    defaultImagePreview: function(selectedModel, selectedColor) {
        $('ul.' + selectedModel + ' li').each(function() {
            $(this).removeClass('selected');
        });
        $('ul.' + selectedModel + ' li[data-color="' + selectedColor + '"]').addClass('selected');
        var new_image_src = $('ul.' + selectedModel + ' li.selected').attr("data-preview-src");
        var image = $(".color-preview img");
        image.fadeOut('fast', function() {
            image.attr('src', new_image_src);
            image.fadeIn('fast');
        });
    },
    setShopifyLink: function() {
        switch (colorPreview.settings.product_id) {
            case 'fz25monster':
                $('#book-now-link').attr('href', 'https://shop.yamaha-motor-india.com/collections/motorcycle/products/buy-motogp-editions?variant=39696695001122');
                break;
            case 'fzsfivintage':
                $('#book-now-link').attr('href', 'https://shop.yamaha-motor-india.com/collections/motorcycle/products/fzs-fi-vintage-new');
                break;
            default:
                return;

        }
    }
}

function setDefaultState() {
    localStorage.setItem("defaultState", "delhi");
}
var numberWithCommasOrSpace = function(oPrice, delimeter) {
    var price = '';
    var priceInt = parseInt(oPrice);
    if (priceInt == 0) {
        price = 'COMING SOON';
    } else {
        var priceStr = priceInt.toString();
        var price = '';
        var rupee = '&#8377; ';
        if (priceStr.length > 3) {
            var lastThree = priceStr.substr(priceStr.length - 3);
            var otherStr = priceStr.substring(0, priceStr.length - 3);
            price = otherStr.replace(/\B(?=(\d{2})+(?!\d))/g, delimeter);
            price = rupee + price + delimeter + lastThree;
        } else {
            price = rupee + priceStr;
        }
    }
    return price;
}

// Function to initialise on load of Page
function init_product() {
    //   product360.setHeight(360);
    product360.init();
    colorPreview.init();
}
// Function to initialise on load of Page (without 360 Section Products Page)
function init_product_no360() {
    colorPreview.init();
}

function init_scooters() {
    //  product360.setHeight(360);
    product360.init();
    colorPreview.init();
    colorPreview.initModelSelection();
}

$(document).on('touchstart', ".play-action-btn", function(ev) {
    ev.stopPropagation();
    component.play();
    $('.stop-action-btn').removeClass('d-none');
    $('.play-action-btn').addClass('d-none');
});
$(document).on('touchstart', ".stop-action-btn", function(ev) {
    ev.stopPropagation();
    component.stop();
    $('.stop-action-btn').addClass('d-none');
    $('.play-action-btn').removeClass('d-none');
});

function isScrolledIntoView(elem) {
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();

    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();

    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

function threesixtyInView() {
    if (isScrolledIntoView($("#360section")) && $("#360sectionTriggered").val() == 0) {
        $(".loading-action-btn").trigger("click");
        $("#360sectionTriggered").val(1);
    }
}

$(document).ready(function() {
    var bannerCarousel = $('#banner').owlCarousel({
        items: 1,
        animateOut: 'fadeOut',
        nav: true,
        dots: false,
        autoplay: true,
        autoplayTimeout: 13000,
        merge: true,
        loop: true,
        margin: 0,
        video: true,
        lazyLoad: true,
        center: true,
        autoHeight: true,
        navText: ['<svg viewBox="0 0 490.787 490.787" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-prev"></use></svg>', '<svg viewBox="0 0 490.8 490.8" class="svg" aria-hidden="true"><use class="svg" xlink:href="#svg-arrow-next"></use></svg>']
    });
});
$(document).ready(function() {
    $('input:radio[name=modelType]').change(function() {
        if (this.value === 'fascino-drum') {
            $("#radio-2").attr("aria-checked", "true");
            $("#radio-1").attr("aria-checked", "false");
        } else if (this.value === 'fascino-disk') {;
            $("#radio-2").attr("aria-checked", "false");
            $("#radio-1").attr("aria-checked", "true");
        }
    });
    $(".fakeRadio").click(function() {
        $(".fakeRadio").prop("checked", false);
        $(this).prop("checked", true);
    });
    if ($("#changeModel li.fascino-drum > input#radio-2").attr("aria-checked", true) && $("#changeModel li.fascino-disc > input#radio-1").attr("aria-checked", false)) {
        $(".siler-state").hide();
        $("select").change(function() {
            $("#product-price-silver").hide();
            $("select option:selected").each(function() {
                var value = $(this).val();

                if (value == "tamilnadu" || value == "puducherry" || value == "andhra-pradesh" || value == "telangana" || value == "karnataka" || value == "kerala" || value == "andaman-nicobar" || value == "uttar-pradesh" || value == "uttarakhand" || value == "madhya-pradesh" || value == "maharashtra" || value == "goa" || value == "gujarat" || value == "west-bengal" || value == "assam" || value == "bihar" || value == "orissa" || value == "arunachal-pradesh" || value == "manipur" || value == "nagaland" || value == "mizoram" || value == "tripura" || value == "meghalaya" || value == "sikkim") {
                    $(".siler-state").show();
                    console.log("value is", value);

                    // $('li').removeClass("selected");   
                    // $('li a').removeClass("is-active");
                    // $('li.siler-state').addClass("selected");
                    // $('li.siler-state a').addClass("is-active");
                    // $('.silver-img').attr("src","theme/v3/image/fascino125fi-new/color/Drum/silver.png");

                } else {


                    $(".siler-state").hide();
                    // $('li.red-state').addClass("selected");

                    console.log("hiiii")

                    //$("li.red-state").click();

                    // $('li').removeClass("selected");

                    //$('li a').removeClass("is-active");

                    // $('li.red-state').addClass("selected");

                    //$('li.red-state a').addClass("is-active");

                    //$('li.red-state').prop("selected", true);


                    //$('li.red-state').attr("src", "theme/v3/image/fascino125fi-new/color/Disc/VIVID-RED-STD.png");

                    //$('#vahan-label-name').html("<span class='vahan-name' id='vahan-label-name'>VIVID RED<br> <span class='vahan font-size-13'>As per VAHAN Portal : <span class='vahan-name'>VIVID DARK COCKTAIL1</span> </span>");

                    //$('#product-price-display').addClass("d-none");

                    //$('#price-loader').removeClass("d-none");

                }
                // $('#product-price').text('₹ 76 100*');
                // $('#product-price').addClass("font-48");
            });
        });
        $('.fascino').click(function() {
            var product = $(this).attr('data-product-ref');
            if (product == 'fascinobtdrumstdsilver') {
                $('#fascino-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-fascino-125-fi-hybrid?variant=43318794682610");
            } else {
                $('#fascino-book-now').attr("href", "https://shop.yamaha-motor-india.com/products/buy-fascino-125-fi-hybrid");
            }
        });
    }
});
$(document).ready(function() {

    $(".fascino").click(function() {
        $("option[value='delhi'],option[value='haryana'],option[value='jammu-kashmir'],option[value='himachal-pradesh'],option[value='punjab'],option[value='chandigarh'],option[value='rajasthan'],option[value='jharkhand']").show();
    });
    $(".fascino.siler-state").click(function() {
        $("option[value='delhi'],option[value='haryana'],option[value='jammu-kashmir'],option[value='himachal-pradesh'],option[value='punjab'],option[value='chandigarh'],option[value='rajasthan'],option[value='jharkhand']").hide();
    });


    // $(".fascino.siler-state").click(function(){
    //     $("option[value='delhi'],option[value='haryana'],option[value='jammu-kashmir'],option[value='himachal-pradesh'],option[value='punjab'],option[value='chandigarh'],option[value='rajasthan'],option[value='jharkhand']").hide();
    // });
});

var searchParams = new URLSearchParams(window.location.search)
var value = "";
$(document).ready(function() {


    $("select").change(function() {

        value = $(this).val();
        window.location.href = searchParams + '#' + value;
    });
    let url = $(location).attr('href');
    let urlKey = url.replace(/\/\s*$/, "").split('/').pop();
    console.log('urlKey', urlKey);

    if (urlKey == 'yamaha-fascino125fi-new.html#andaman-nicobar') {
        $("li.siler-state").click();
        $("li.siler-state a").removeClass("is-active");
        $("li.siler-state a").addClass("is-active");
        $('#state-list option:selected').removeAttr('selected');
        $('#state-list option:nth-child(2)').attr('selected', 'selected');
        $("#state-list option:nth-child(2)").change();
        $('.silver-img').attr("data-src", "theme/v3/image/fascino125fi-new/color/Drum/silver.png");
        $('html, body').animate({
            scrollTop: $("#colorPrice").offset().top - 50
        }, 1000);
        return false;
    } else if (urlKey == 'yamaha-fascino125fi-new.html#karnataka') {
        $("li.siler-state").click();
        $("li.siler-state a").removeClass("is-active");
        $("li.siler-state a").addClass("is-active");
        $('#state-list option:selected').removeAttr('selected');
        $('#state-list option:nth-child(16)').attr('selected', 'selected');
        $("#state-list option:nth-child(16)").change();
        $('.silver-img').attr("data-src", "theme/v3/image/fascino125fi-new/color/Drum/silver.png");
        $('html, body').animate({
            scrollTop: $("#colorPrice").offset().top - 50
        }, 1000);
        return false;
    } else if (urlKey == 'yamaha-fascino125fi-new.html#kerala') {
        $("li.siler-state").click();
        $("li.siler-state a").removeClass("is-active");
        $("li.siler-state a").addClass("is-active");
        $('#state-list option:selected').removeAttr('selected');
        $('#state-list option:nth-child(17)').attr('selected', 'selected');
        $("#state-list option:nth-child(17)").change();
        $('.silver-img').attr("data-src", "theme/v3/image/fascino125fi-new/color/Drum/silver.png");
        $('html, body').animate({
            scrollTop: $("#colorPrice").offset().top - 50
        }, 1000);
        return false;
    } else if (urlKey == 'yamaha-fascino125fi-new.html#puducherry') {
        $("li.siler-state").click();
        $("li.siler-state a").removeClass("is-active");
        $("li.siler-state a").addClass("is-active");
        $('#state-list option:selected').removeAttr('selected');
        $('#state-list option:nth-child(25)').attr('selected', 'selected');
        $("#state-list option:nth-child(25)").change();
        $('.silver-img').attr("data-src", "theme/v3/image/fascino125fi-new/color/Drum/silver.png");
        $('html, body').animate({
            scrollTop: $("#colorPrice").offset().top - 50
        }, 1000);
        return false;
    } else if (urlKey == 'yamaha-fascino125fi-new.html#tamilnadu') {
        $("li.siler-state").click();
        $("li.siler-state a").removeClass("is-active");
        $("li.siler-state a").addClass("is-active");
        $('#state-list option:selected').removeAttr('selected');
        $('#state-list option:nth-child(29)').attr('selected', 'selected');
        $("#state-list option:nth-child(29)").change();
        $('.silver-img').attr("data-src", "theme/v3/image/fascino125fi-new/color/Drum/silver.png");
        $('html, body').animate({
            scrollTop: $("#colorPrice").offset().top - 50
        }, 1000);
        return false;
    } else if (urlKey == 'yamaha-fascino125fi-new.html#telangana') {
        $("li.siler-state").click();
        $("li.siler-state a").removeClass("is-active");
        $("li.siler-state a").addClass("is-active");
        $('#state-list option:selected').removeAttr('selected');
        $('#state-list option:nth-child(30)').attr('selected', 'selected');
        $("#state-list option:nth-child(30)").change();
        $('.silver-img').attr("data-src", "theme/v3/image/fascino125fi-new/color/Drum/silver.png");
        $('html, body').animate({
            scrollTop: $("#colorPrice").offset().top - 50
        }, 1000);
        return false;
    } else if (urlKey == 'yamaha-fascino125fi-new.html#andhra-pradesh') {
        $("li.siler-state").click();
        $("li.siler-state a").removeClass("is-active");
        $("li.siler-state a").addClass("is-active");
        $('#state-list option:selected').removeAttr('selected');
        $('#state-list option:nth-child(3)').attr('selected', 'selected');
        $("#state-list option:nth-child(3)").change();
        $('.silver-img').attr("data-src", "theme/v3/image/fascino125fi-new/color/Drum/silver.png");
        $('html, body').animate({
            scrollTop: $("#colorPrice").offset().top - 50
        }, 1000);
        return false;
    }
});